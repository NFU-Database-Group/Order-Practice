<!DOCTYPE html>
<html lang="zh-Hant">
<%- include('head') %>
<body>
    <%- include('header') %>
    <div class="container">
        <h2>購物車</h2>
        <% if (cart.length === 0) { %>
            <p>您的購物車是空的。</p>
        <% } else { %>
            <%
                let totalPrice = 0;
                cart.forEach(function(item) {
                    totalPrice += item.price * item.quantity;
                });
            %>
            <div class="product-list">
                <% cart.forEach(function(item) { %>
                    <div class="product">
                        <h3><%= item.name %></h3>
                        <p>價格: NT$<%= item.price %></p>
                        <p>數量: <%= item.quantity %></p>
                        <form action="/cart_remove" method="POST" style="display:inline;">
                            <input type="hidden" name="productNo" value="<%= item.id %>">
                            <button>移除</button>
                        </form>
                    </div>
                <% }); %>
            </div>
            <div>
                <h3>總金額: NT$<%= totalPrice %></h3>
                <form action="/orders" method="POST">
                    <button type="submit">下單</button>
                </form>
            </div>
        <% } %>
    </div>
</body>
</html>